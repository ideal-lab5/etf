use node_runtime::{AccountId, RuntimeGenesisConfig, Signature, WASM_BINARY};
use sc_service::ChainType;
use sp_consensus_etf_aura::sr25519::AuthorityId as AuraId;
use sp_consensus_grandpa::AuthorityId as GrandpaId;
use sp_core::{sr25519, Pair, Public};
use sp_runtime::traits::{IdentifyAccount, Verify};
use etf_crypto_primitives::dpss::acss::Capsule;

// The URL for the telemetry server.
// const STAGING_TELEMETRY_URL: &str = "wss://telemetry.polkadot.io/submit/";

/// Specialized `ChainSpec`. This is a specialization of the general Substrate ChainSpec type.
pub type ChainSpec = sc_service::GenericChainSpec<RuntimeGenesisConfig>;

/// Generate a crypto pair from seed.
pub fn get_from_seed<TPublic: Public>(seed: &str) -> <TPublic::Pair as Pair>::Public {
	TPublic::Pair::from_string(&format!("//{}", seed), None)
		.expect("static values are valid; qed")
		.public()
}

type AccountPublic = <Signature as Verify>::Signer;

/// Generate an account ID from seed.
pub fn get_account_id_from_seed<TPublic: Public>(seed: &str) -> AccountId
where
	AccountPublic: From<<TPublic::Pair as Pair>::Public>,
{
	AccountPublic::from(get_from_seed::<TPublic>(seed)).into_account()
}

/// Generate an Aura authority key.
pub fn authority_keys_from_seed(s: &str) -> (AuraId, GrandpaId) {
	(get_from_seed::<AuraId>(s), get_from_seed::<GrandpaId>(s))
}

// pub fn genesis_shares(hex_bytes: &[u8]) -> Vec<Capsule> {
// 	let bytes = array_bytes::hex2bytes_unchecked(hex_bytes);
// 	let caps: Vec<Capsule> = bincode::deserialize(&bytes).unwrap();
// 	caps
// }

pub fn development_config() -> Result<ChainSpec, String> {
	Ok(ChainSpec::builder(
		WASM_BINARY.ok_or_else(|| "Development wasm not available".to_string())?,
		None,
	)
	.with_name("Development")
	.with_id("dev")
	.with_chain_type(ChainType::Development)
	.with_genesis_config_patch(testnet_genesis(
		// Initial PoA authorities
		vec![authority_keys_from_seed("Alice")],
		// initial capsules for etf
		b"020000000000000000010000000000005b5d132d35871199c33dae78caeb1eb0c3b6ec2bb1f63d3ee7db8ae6b4fbc8d48b5c72f5eaee83fe3307d1afe030e67c3b5242f4b2cc8e349729e579dd82fa11949a018c5999d5ffbbea1d368e09ac949685ad20d8998ce467611f830b1f74d50b056a298f2939457ad8c402c227b5f8fcf02128044ad0d0f01341bd4ba1f01aa86eb8f64deb146710ca079c6062946cb0c55cca1ba3c8fc2509d28bc9b51313d1327ead97083b5f7907b5ec9fb3bdff21e477c20f167192bc527d32f613fb21a8a691a9139bf5f2d6113a23db2461b1a3da48ae3546ec1c481aac6718e38eb0464d30f153cef2d65140328311d30727f41c91d124a436af30a9e16c210172bd0002000000000000098523d90762d59632e419a6e5b917cb7de32f863282da2ee75af3743e04d19da3e8b17a96e7209eb5ae6ea61c8c30cdbefc191d3b7c1b14c389774c84e90dd65a97d70706428cac75a9f316b87f10abd411a121bba88e354e286b10e46eae23a83dce29588d7f9b7ade2c65687f25767176714ba1fad9567a72fe6daeda142c4be7cc4486f4b5827ea894c4adda4dbe1c8607d8d29f11a430294d87fa0404b325029d7a03bd0dcb8ac44c70ca1631ea1eb5a91cb611a1628a1449d8ea0755c22fd379eda64ee60aee43d6c749657cfc67c04153d5daa085fcfb224f0ab93653903c236fb7f6048f484ea1443e9957784c0e250d25a4622e02cac50debe4275ae22d4433b72291c370a1ea3000167aac16b8644874834f70cd5e1edc9212f11d497501a3d731c09b33d0ce153387f553260d2aa86a04daf9222a36c5b58c280135b283a8825df41d4b59a63b6f7ab71c3b7af6cc9b110d6dc5cf6042b0df6f7d319204760cc82ee5c54870fc1828d2b84c8144c129f30cad85f724ab091afb365dc9d24edec9686435ae4da1c1644026014c9275ea5722ee57a7d65b00270f67e0e72edc5a5b96ec3ecdc3fb2224ef1defa96a7004b59f83fb55385e08068d831788f0f0993a8e743bc6f8f595f664db1da15dc898ef1548e985b9a1c91bab2a9b551655528c4774b171e1f470f1d9a6db0a3302734ddf6ad994469bd1cbf271000200000000000008a14f99da65c7abaf99decd417345c1f38fd2b78be3ec74e7e65c449ebc7f572359ddd5afeaa09e5a490acaa9ee29f2a9310f38a0c679e004506fb629e84bc057cee62fe23e1e5ab37d0d3e0fb60c7ab339c87fae37d0eb94d612c889fcc571ced6d54d9e47c577c60e01370200e4c127dc3300476db6d1e3ce3cd5758a4faa3f2cb3b68d413a98da260829f94c7a4021c52d7e7fdebcfe9dc54a6c7052125cc66b1042285c47d82033e0624ed5106bd400233aa2a7e2b44ce4d4f943e04361c2a562145d27e42c9f21910dcfc1d9b26c179c6ca62e6d38e3adc0d6bbd28c9793563c81fec66206bee0e4b23294790ad9170d09b9ac973c174545883ebc38d62d23c4abf2faab884fc8d59528a1052201d784f1ef576a8525b5905169406445f4ac997c942dbc73fa5f1d0826a365cd0cf24e7d82a199fabfc82405469c515ac0b4f0b15fade670e99803401271329b226c5a8f4cef2d3035c306783f527c67781f0a1dbe19fa9785f47cadec51934f052c1f1ae586d5deebf7bc69c6df818d97f3d6330d9151174668ac562a89efa334ec7f36db8e1f2c2da1d902bd84ec6c98ba0059231aced8c8947b34239c542a2f0955f70635574a080f55c5df2878d2f8d8d7185312d7486e719eb0db1d5628d654bd1b558b0b1a96944716fb44989475706e4816b85884ab82420811c3e53154be0d913267381ed8900af25d8cdc7a3000000000000000a745fcc799db6c6b69a8285d614c0764999cd88e2aad853f48cc52b118fe8b02e939963676de61ea54d5e52a1417456f300000000000000085f27d0aa8052515b49302d9b3aeed01e9ca3e044bb79bf664a14823ecb2f5ea52986e3296580e9a8ce9ff859f19f0e2000200000000000018df429dce120622b0f129f24161a75900e562a50548855ffdbc5334a6312e87b6a1cd028d62d0ec6820412bea91eaa434512cccfd370822b1c2596c6cd4b2298bc087cad5d4248fcf5c4c09ab5b82848823e08299c4c5840cd738aad643664d8c03456c96521796b12cdb77e76d5c6c543f47849c4386e233f7a18dd4c50f0fa1dcf025179a7a247bbaa705f43232ebaa51834fe74093dcd5f9c7ac824b7109da742bba2bd0a209aba9b4a60d21d4b0966b9d5f4abd2fdea75484649c53c617b23b8a0a907ce660549a0c0d483f3edca86303d970ce4aefbb40671d272cd27042ffa8f3573f0f175a151d391b33783e3907b7c57b8dc7b9c70a6ca9e28db84adf4031976b2219f18edb7e3bbf95cb46b2586ccd5ebf4144b462a61fad62a840875833cd8e1a61d378615ae3f58a0928dc8eabaa93a8e904eee8f71ff54cf74a214689b2ef81364ab47efcd24822b3f53f6dcbb9d0ba9ab37ccdaadd703bf52b39bab313623aa5cdd3b05c42734a5ebe37dd4fe6d6491e41c6e83cb242d68a7dec6f0457a124f57af507da7de720812d3f311bcba36f46503d67e9a03feadba7df65b4d58102579c66ed43c2bf50287e6e44b4fb8f249181ed985348789752f69acd7e8bb29b4e50b2ec69915e0f6d2086a5a16bbafc413c5c314b7196a21ca38f1ad2bb17edba03d2b5af19f6be67954f71bbe4c98714c305bd85dd698aef6300020000000000001456c90bfe21a6088dc74fe3b3fe14a6ddefdda1ca3ea06b1b625bfe5f5c60cfbe58903213245936e190ce30a2ccefa38167d3571d92414125c6de27839f527bfe0239213dc16a7910b97001cf7dd1929b7d0051cde01063d8c213ff55fb5fb58922b2a8ac9d8b15ddb9260809d402ffbe4416034ffb630d52c9cfe68b3c69d93a99cb22fd497751ccb866410065326d41858850f3bc7b791e3b5c2ea091ceba88cf2cddb600dacdb5a8bd85b5c0a368653f1e889a7809dab129345155c3f06b9678f8c4955ee36c064f3a9ff5ec01da521ada6476bcefd3b7c68f8183dc30804850d1364c93e88d5ae4843f9ea169487235be26a02fcab6f3f2d7034c6052aa28d6aa41bc623b0ecb1404a7340438284c0c70cc6f174b4b6b078ad9d2f6b0147720b1c8cfce8d6fabc15d5ddc0684057e412805ec9f6e364425370bdebbaba1ee560f8f37d4591160477eca9ff3eb1086a579ce47ddfb6b637c87d68dcdb18f6eb453327be199719d93bf710dadeaec06a002eb186e8cc3cf6bc8ae404e8fbe6065a652486a97a47e4eba33b804f3a4cc9561ad6b2ca53efa6bb24c7309d608c1f5deb8a83ca1a0b4bff115e6cac5bc9f74dd2aa1edab854ad096c290539bb3441e19aecd5eeec7621aad796db3f2973ad0864f1ad867a6c465cf2440bbaccf618c431c9bc9645e919e2543a759e5c87065158c20e0684ad2cbaa8e89d31ccc0003000000000000016e9528b81068b54ab5c18609e8396a4feef9dc87c34591bc0d98cadbc3f55b7f9109d332a52aedbbfbc6bf3821b45a51fd8186b99df4604803f4bb1d701bea6df05e99dd6d2ea36481384d8506a54a9f621da812cc58dae72c99ef5a2c6850af7586513f2159a9de4bfa0a0810c9d4740901345b6165e19ed0a4ee663059168a7b14ea3fb9a7af8a5902aa76c597b4ea1709f3d23d6c3205c632daae1d7b97d658b4243763bc3607905de855f4159c2c6fb991fc538bd58379da01971e2439f4285af9c9c26cff961b50b38c821876d961144aa1116655f4275e08ac24afb76d3c09192b40e00b79eb3714ad6eeb92011e47610bc8d18d20c87d7d5f30acfb8e87cebc94829f4ffd169571920f9abbd88b621446317b36cbaa446c2b7c56ba7a7763cdcfe584e673c64c9b524fb1fa2352da3b0636b56ed7c7a3b6f7f36fa364f82266eac135895f413b57b8effccd34aa5a4db14fc1bb4d635a6aebeb86a75a2c58a9e831b4608053790afba17051a86660072897703119450216f493ef585558f9c16dd94157ac58d4a36f4d5d897bbffec6abf9c006580dd863bc2ad581aabea62a594f6cb3132f24c374f0e1929f3ac58d546d01728d0588e998133c7d0546e265e9d6d77614b6bb336e6d252eeb74b47ee1c02d1cd93b01df137205c9827ce46712c05476fa4cdeee4ef300da4b4a07640019a78bcd3260e3d6da402fd4104c13f8ec35dd5b78b4841e7db2a84d5ff6aa55517346c44dfce5181ee07f86feff1026fe629888438598682d479584a5ce9c0334ac3602a5f4375fff8cf7c7456e00b288f8e877fc0a2ed538eefc97e3e800cfbc9024866f05077b7a9acded4e78fb283982b0f535031358bad1ff9b020d325ac62f07965ac9a988456ca36fb59579108753ae9e38f825a44448c653ed1048debb624899ff55e308111f625e21779f2bb9cd5547435c899561a656ae63ab098440a41eba30fc210ffcc77f6687ccbf10413f2a93f34eae1c5073da6a98dc5ae817ee00de0e66eb61045d0d4e8c3c256c5592bfbb3899bc65da9d68a8defcb2c8a8e761589d9da7434d68b2000300000000000006963fbd0335a02cca5ba1728f0524eedeec361b78ea6acd4fe076cba77fbb2cb7b6f51edc4960e2d064131d75069f54417b383720302b51c0a2f35151cd1be882c7392e0e7884669fd07fe9b1d67366242f72d324d6415cf3c3936f2ea9594757fe7901585ad33afa73be7b1499bfc13572b7486746dde17ab561088ef6bca05576344e45b4c292afa788a7b21de82caeeaa5722009cea62ebfabef8a6745e396a0863a43b700820413aab7005bb6d4be90d9acdb6ee83ec17fba0945eeaf75eea86888ccd712b641f94c7ac1d1ca986a59ff364c4c7c7a78803782cfce7342350269a54564b360af81b0bb7a81c98cede0d70139f21f51804c64f1c14769c97558ea629ff3bea0320130c034b1347a456fbfc5369d6395a94a23e3a5315b7e25c758313a841407d621f9f3240c03b87f2cd7fe4e895be368e7de34c55a70b1699134d966fa7a1117bdd26cbb12417fa0e230d1a22a24cf673b38be524afbe28e0297e7d19a110b8cbaa3214a9ddadfc8e1b2ff67084f5332fa9320a6cc463164f2b5e2c209d25137f81af08e096ef082d6255d2d1facdf3512654110e7f74f06f6a5ff47b725485e613571a906078edaea0510cb5ca864735ffa42837c60984b2089261fffea328baf809b1b6763143f2428f332db5b92022a7db531bc18446e91664a9fdef0bbd68f1d144d39a28d632554bafeadc293d22c76fe097da1a911a78856b44e16646a2d8aff40e4d423ffa891bef1ac8faa8c6913a98d13b17fb0a73ef48200b3819504d602dadf735f3077b3beb645c5142af77a07bc687f43b79be7056a530342af6601cc9d62a09a166c138063815cbe90ff085c7de078c80803a4b037703257d185f6dbdf8d553c6bbfbb02a539844c74e0efdb0d16f4b3137fbd8c08b232a4d06d4b65f7e57abf4f62dfe0d7a5a17be7dcd540b4b207e377812e85921f553eb5b2224ecfdeff5b6be39a5c3f2b95a853eabd57527e2b3a1095cb12040ffcbcb42bc6491dd350720dedd9fcf8380c69ef51bfd5825e1798b5ea73114cece9ee965b41e8c4ccf68a91038c8e57bc598a65a00003f431ee2620010000000000000eb6f956843cd4674ee0461ba27c3e5894869cec76194ebe5f42340fc797f38cddd1f1d014dd0026a67d81e4a6265c89fe634e58f5b634dd8e7c0e4f589b69fc5f42987a6f4da353c5d89a08174c347860d43e17a04ea17f39e913a97676a7c3cda150ef7e0cb2d66f424fd0d292d206f259319d7b04e215ffb51edea257c4fb6fd5de4e7bd402fa95f4649c56d71470a23d21efca1957a8a15419110cd225c48e5ac0e3290ce51aa5f79f0d108beb3f51d4fb7b64c5a652a5271d41edebb522d27a265316ba105923eefba0848d49752027b459e684fd022f90ece7ecc1c45d65d7e92c436ddb376805f8924b1a23c087fd3ae1c7d20565ee0ab5fd0a091c13b9ea8fee23b1a465b2092e4b21042b14cc98ead52175a0887ee0c691e1382c001f01000000000000081c8ab8083cf6bdaddfb6766b3766c4b429f2e89db5c10ed1c39cef89a7925d459de328671c3a414be078077d97b3826977943b404338eba375a384df2e08cf1fc0451fc1563b6129e847e56eb2334be7c61cc2ee95785ba71b4df95bc721bbf26c50e881e3d257d7344e0185cd48ebbd6e8196953fde0c7927c4d44823dc5094d17ca04d3ac6f6a6c919e85ca6dab17734c0747b6c52f17e45cb955fc60de5a8991a6d97bdc942021b2227cede804c6cf3aa51b239b846029df93f75703da5c0d3427a8c019ccf08d7e2de8078616157a0bd0ea4007261d7da864f68a30ea30804fefd069aea96e336528618f65cd8aeb7dc95e939aafe1f8877bfd8fc583cc9114454f43561e56233017501f57bf6703c2510678846d93f8134603aca4300010000000000007ae99c537300a20ac918abde41b03bfa6fe582ab95255834fa5d6a3097ed02ec55565dbdec5f1b4c3f8454fe5754de498bfa6d73be7083b926073970eca4f953e9ea0a5a369f7538ebf4d0c5a5169100cbe4215a511aaaf39e9e77fec604b2b016da12dc945f6f981b78731f291f69c5edac46bd521d7ce347a6b5c1048f346661aef5374e871b2e0a251b0b51c77b78e9bf6f15730b95c5a389c36a57441337f614292354ce182024cad2a0b13cfd92d8247adbfec99f5092779aead93b553d7e880280d2e91ac9f83391021ecfaa6f574f039e99744e0299062b9191b54b21253a9832f122addcfe312abf6c5a3d632a0a35dbbb2e2e9e78b54b054b5216f5ff01000000000000c202d67bebc8faceba38acd8f8413d9f0b115a5cbeaefa1f7a8214bba892906c4e3d0060cf2ceb5597bba48758e465f9295c0a823639e6fa1f2c22e58ec9f068e935406f992ab33f6ed6b8d1180509e508a8b43cdcdb0870704524f5d1d960ec6e911eb33ed3bd745d4763e214680df371eee9df517c3fd934c565c165790f3e94d45ebc67bc03cdf1c23cab18a3b978369f2c2051fa7cf0771d054fabc20119bb0ce1c8ae6e970175229677bed0a433493524a69cb9468d02d7cb984793eee7c49f323a0d8590c8bcacf987a1167690fad6e97b460f2de68106ed9dcb1c16b3cb60e8b5cd85dca806c2a9cab6d5f6d7dd24e2ae02ec31f7221ceb8d8d84786a7c0f0deb13057b227305bcae94fb1157d64688cf2c0115efb3c1f20afb21caad6d9f027b237bec823dbfd3c674550bf5600d5a9a447de0e9c92b2962f7aec18ce58cde98a95281aabae342cc19bc5556cdeb089a5a934c0cb771031fe648fb122fc5c82bdbf42f8b71a2c81170055cf366192ebdd0462cb018a1ee19e54b9a964b0db737548efddc8a294385ede7c944704cd2b96c4213fe6eddb01f11fc037b30509093490136c421d75a9af6ccffad8cee0ed2f47c6b42488dcbebde24895e9db7bfb87f5a7cf92411b25ce1ac7d25c8b15cca3b8ab0e45693da2bd936ac571ac41d9628c00d7bfa6b11ad5e05009d8d9436a869247d31a8aade5506d03f00020000000000000a7180698a33df0de878793f5730a57068cabeeff2bada0f6d484b91abd9570c4f6dce7a4a91ebb2eae26cd037001a778594d67c9cb0ac91f25fca51076a126eb8311fa393a4d9acb6af703a250d41791453a5ecdbbebbcc2ee513aae10e0fc2fdc14498d5c2367996e7c2aa2a5d83565ea4630302e686611d8a1c2bdaa5b95b28d8a0d6abc8b0766398efb20bcf4c464fa83c1e49cdbf8255769670ba1c9bb4015c009d62fe615d60c9a2dca6f8482461eda5fb9d8cf4a32df0e686bbf87ef70f0a1402b5e0b79013ffd627c18441f395b39b79aa18888243e007e0ad331f80370018178e861962c6631e2d41a7e7b1a4dec91820556200b128fc83496ccc62100fed39662793088a015f16ac6e0b059d2a3bda251453ffafe7f5c360b449c50a4e7165fbb50c8ab3c176198cf8c6d7fb40e889ecb2c581febd9c15c49060d939beada8e1cc1d2a1a38b902465c4a6a0f3a7a5ad7e02c8e6b4dfe0b8705163cb21e29d6435a10b26c1fa336d666c62dc9c265c584ba06c0c4c93ced506708ea519f2d6b2488e39e7a2e467004e9d1ec304f8fec4dd39be6c9e50860e510efd8c544c6c70079a33cc5bf9ca4598f9208422d17e746f61f3262a47a6947e0b9767d9b3c649405f2b7d08c6a192399d76fa962c22a9ac9dfaaf2ebbb47c6aa1948fc4b76730383af88255d065e287b447e2a0c8ae9c868eeacd92452950a990cef30000000000000008e8aa6e7f9c6b70f4788372d1d66900a86d459c69419ac8e3fc0b0d0fe6f6ed96cc6e00b73a3e8a351825e85f1f9ded53000000000000000926a9ff6bef3fce4d8ef2f4ee971bfc276fa9aecbda44f84d1a149225ea32b21d6565a81db27392cc4977b6837875066000200000000000037691ad633bf35ae5f2797a18fab13804e469d1e548a43775f87cc2ad7226faf983b73323a28200d2d01b1dc4db5967c239141cdfc9d27926f58182d8bda572fe9d81c729cbce740cd4edf67a0272713b5d83d54568a7576fb8ee48245ae72fc146718e82ee1f437315779f466116a2d3a1237151087f681cf31bc3d3c168a99725f5ae40e9d92740d7c1c012480d6bdf9a71d8f478fbdb85cd3110adf361e4d578a9037cce28bfb6eee2fcfbf9284902b793a15c3ad690af796c66e36f0b1188dc4bd8ab0d21fbb644a8ff41f8ed6022f35e910bbab0ee89005bebecb8dc0db9841776be4fda872b413ed32fd0972eb378cd51b712d0aad77cbbc4efda46b3c9c79d0dcac30273fb6d1058fe132ec5aa400c71a91f64ef3896c75d9bb65b3e5e4126413ffe7b345be1ae8f98c5e5a9d033628dc17f13f6c54d8dc9303782689b2ccd740aa2b46a39d24c72d97b7d8a8c4289f3afe0da8add3b68022b27bca59145c4ad493b10df0b7f0da8c291335bf206ce1e44c57a25665024e5f146d2cc81b430e7504012453650dd23599fdeb14e91aa397c17d43d53ada83d42f68a0f833af9c4c8b6f01ce63dbc1d85d43e87d0512237fe6446cc680eeb0f503d7f530cbf12b819c090d9ccf02dfc53350adff00b9eb1157c14dce85fef36cddb10453a69e8c8918f52dfaecc6a6733bda26a27d671987e4b21920da43c3c63c2fce67ff010000000000002a3e475a520b74d99cc5b8ed970d0baaee2f821af0ebeff1c1c2f95b00302578c012b9dc921fe3334098053f2209340206009272c1a575bd25a2623732a6eafb56b3996796f57e5c540d44bd3b991aab6d542c367710fceadf1b501fd2e7677cb73370d5313894bd0c089ab1635953969288dab324b3ec96d46a297095841585e4a788f1120e46989e27e0aef6fa7c52a0a60b00319462032250a65074fa413cc3d2e4226d2c8104b28b39c4079674543e491fa229fa68c275119620d0a7376c8240f69c8e47a83718f75f7accead0ebef6cf169c171abc020fbd46f51331743e2629e28bd67d1e2c9f381d35fedbe8f30bea46bdc4b9de06809f3ae263fafd53902dbe2211253bb217b9845747008f29e043e0a8fb23f1dbe4e7b98c2f9580d6c51f5f07fd7d0243f5b56a90bbb639501d2f680a38457319bea8372111ddf711128488bc16f6442f98cae04e3bfb692099783ff0598bc9f4771fcbd385a2b24b41733d4bc216eb245bd4a13ba9ee48760b72cce08ccb499b0ba9807942742a9fc580f0c5bdaa1259ff94ceb1eb2c7a7cbb2abbc03b3d88d8cbfbd740f1aede34167c455fb29d651706ede8398abba3d823de070be11a0dd5c9b7c1f531477533acbe888bf8084fdd43448e04a0eacc1c4a5a48f5627ba3e2c9571cd7f0ae14d43aa956ec9cb326072427a7c968a846e854cb17c374dbe96dbb23f3044aaf500030000000000000561b7dadf23ad77a639921e10c8ff26d4d3207fb7c2ec31e57f9e764477ce5acbc7c907dc2d37cb8a86c6e43cfa53ee7ba9f0396a57c25b16da5f13d3e302dbfca42546b7f8b374ba70de146d047c1c1daeee089c40797dff3a97a59ada23efdc7f2403c97af323b2108b267c18baa39887e94c07797360433fd50d4f9adf5075bd5cf4835f76e6ed768241046457639c2c73ba5d90e3a7a6e5f3d9ada4aaeeaeff2e4cbe9c037ba9545fe63b86d2cafdb8db17d23d5e91a574c9b2c9356ee44532f694132de81bac5da21eaa656121106562ba0865fe80a61257a10917cbfcca66ea12475ecc5e10be4f5ffaeb04b046cb2b5cbd3513b7f3e4e77b2cd4b43ce7fc7014609eedd4563713f190eff9e328d25d305cab0fcfee1030cb02cd77ab79bd2c62f54284817f1cae1656e1107e88b54321971e51e8a84a76c7f25a083a95451fff4a4294d30e482f2fdb778f40b844a50c384ae6fae5b2754f0f35badf96e86095799770f349e03def8b81a9972e3613ff4e1131c26fed3828b0bb2341f77deaa7c67fe7fac9fc9c7c4c50d33444582fd58b940e1bc2e0966b8bd65791a32eddd0a39b016ce26f46486f4d9352972f8f11218443131575d436f64e9acb924e3a32be41a11ec15179e3ef3c2b2764239edc2d81f4194c130abefdf3a2a8955cf673f0a2060a448178050366b8c48e16bc26dd5deabdc65e62c0e749c89a52bf2e4ab54909d16eed1314476a74ae434494aaefb8732e04253d758ffdb85f1151fc25b464b6e3cfed66baee14b49dc37308a39e43848ef143293c0bec05ccf29058dd3616d17b5bf9d8fa50bdeb5710e0dc957a18a26091b1375d06544c2a1b4cd18d8b8d26dda9780f034adff07dbb0b1f836ed620ce6f94a143a9b697f839a6ffa999202fd4b80a79db3279430cc1ea4c0c97d9ddf7f283c5efa12d2939b1ac56d0d49ece2a3a203b8ba9eb6cbfc314930dc892bf5d5a8bbeb3d29d86dd0181ca184612da7767846ac90e74470be155c8d3e33b9b53b23d976b6988df7357b02358593c6dc7ca689b1b83e680e5cda2891612beb7e8b53a8c06a7cd60a3000300000000000018dc461431d47804477d5093ab6c8c32bce7b1e3b5009c14e59b5eda92ae137d407c74f67be117c39d55e933fa882c131b1d9b868a5d2296002c9d3bc2baf40992dcc96753a7e48f9c347ec46a3f0f223a1ee7146094e914f7b76d0a22b4cad3097f5299d84ccc20fca3ef6ea01e33f4fcaa3ad659c65238e00292197140bc5a03af1a9c7faa0fbb2672a812458caef0d7af76865aa5af488e723d13f344eb60190ae49a093b71f4b2240c1dd7a63aad71397f14f826d0a8ce82c5caae4f1a406e4ac7af645a176156ececd13e9b5a598d4e92e5a733f69977fc43185df4ede6244bb76391e0f7a245c7e31ef4978da69756cfc97f29f8e21c94eda63527296fe71481214468af65322966a488cf3d26721f66d3438fbbdd5881fda2b155c338532f6d58408cc81e253d1800edc868271b6920b6ce256c5572d79236cfdaf0c55a31064383a85e7a414bf6e80c515b0e5a772f2f2a0ad30cfbdd2878b3793f5cb3f24f18fbe7b3f6fe1e13e2162f62894bbe9cc1cbc70e71c83fb94b2d5337cb9e5dfdd1234970db7eda4f16cff1bdbba2708b6930c81c5f450f8ecb226f007ec74a5b7605c2cb03015cba6997b4733b534fa3ddca2152d6c63688bb5d23e58d26f13bec46c7f194ad02dc8ac6919d06ef765d7fee672d520d085574c868facd45cbb10f7632fb7412bcd048cee47d81bef4f080ee3f562b916523f94276c19f94b0f0cfdec8b5560930f0c4c963a02c1dd73eb9ceb520ecbd035bf2472403b7a2f7088df0ae14688af3937297f7d9c31927d755b742750a73ad29beebafa298f7af451b7e161cf2d9bf4f5b5be9930d32c832ed7a393fa4eaff997a616f18974232cd9ef375a4f76b767968aa4546010c5d9283dd22cefbbfe96d1c5e86baee5b67b90b919000dbde276f9308afbe6f5fd6f50618ec7d016016e87235aeeb2f0bb1771d9356ec17fd2580e7d579a420d25f1aeeee142b16a8430f0b1d2ec079bcc86d149eee0c41e17f9e48bc2e1821f129c8f16b8298df066da655b107abdb07fe81337c11593361d5e7b11de159882d280316fc072d7d7952ab6310f34c562001000000000000117a8359e1b67d7b9c39915c579071432a13c9aa7a42dd861aeabd65ab9862137b452227eb4682964359efb678de61296abf72e029a3e236e3a6d4ef15bca9c9eb9903efd8be5eac3d314584a37d45ec69c1d7239d16ed9bcdd812e5dc50604514f7ac3f0b68897295ca7c0e67c5378d9cd26a1ccea13277c709b42941b8f10c8595c7fd254f5be561492dfe599a7ab9a16dad980a944ac5a4b5bdac3602a2321a6b2758046153a1723417abc0e628585cb8f1ac92eaaaa5573ff9e0649ca0d83b5fa2b1ab6a9c4377d83aedf637b6b5ffc1d88db04a93da3c811254434d6633c177a5ac6b3e38d7dea1a92b70966e9816bbd2c3fc17721d69843107568261df73121374e1c14feabaca1b278e789413cb1c75bb28471bee837defcd9d08272920010000000000000208f2b628435bcc337f9453fcfd4cb054e771941e7a4b6056127b53984db7c34dc62e3a4295a3aa9c27d21238c4a7a265aca0c02cc5d7a61f04fde4eae6dfab4ffccefc97b70201ecfddf21773474aa5cb3ee5db7fb2ce95f97824b6e8e2cda38ad1aa45b66cc3ab5ed39b2bfe02797e3335513eddddf8e61cbe446300a7cdaa1821693f1825fe9f2ee709328e83a927023705aab0eacb0ebc36647d8808f7713f6d8a42e2b0f54c02b9219ed3cef57b87f8fedc6f9eabd90f6b2c42caca5011998ec7708f57ca246f5f834e3232743b23574b98f56a87de66c63df3fbb56f64e81145cf5bd7f1c34752e1dd34f7a19ef9830dded4795d2215c77178c096f2cceb3cf1fc56469d9971f631f98b839bad8c2df4f1770f28fcfa764666ecb748e",
		// Sudo account
		get_account_id_from_seed::<sr25519::Public>("Alice"),
		// Pre-funded accounts
		vec![
			get_account_id_from_seed::<sr25519::Public>("Alice"),
			get_account_id_from_seed::<sr25519::Public>("Bob"),
			get_account_id_from_seed::<sr25519::Public>("Alice//stash"),
			get_account_id_from_seed::<sr25519::Public>("Bob//stash"),
		],
		true,
	))
	.build())
}

pub fn local_testnet_config() -> Result<ChainSpec, String> {
	Ok(ChainSpec::builder(
		WASM_BINARY.ok_or_else(|| "Development wasm not available".to_string())?,
		None,
	)
	.with_name("Local Testnet")
	.with_id("local_testnet")
	.with_chain_type(ChainType::Local)
	.with_genesis_config_patch(testnet_genesis(
		// Initial PoA authorities
		vec![authority_keys_from_seed("Alice"), authority_keys_from_seed("Bob")],
		// Initial shares
		&Vec::new(),
		// Sudo account
		get_account_id_from_seed::<sr25519::Public>("Alice"),
		// Pre-funded accounts
		vec![
			get_account_id_from_seed::<sr25519::Public>("Alice"),
			get_account_id_from_seed::<sr25519::Public>("Bob"),
			get_account_id_from_seed::<sr25519::Public>("Charlie"),
			get_account_id_from_seed::<sr25519::Public>("Dave"),
			get_account_id_from_seed::<sr25519::Public>("Eve"),
			get_account_id_from_seed::<sr25519::Public>("Ferdie"),
			get_account_id_from_seed::<sr25519::Public>("Alice//stash"),
			get_account_id_from_seed::<sr25519::Public>("Bob//stash"),
			get_account_id_from_seed::<sr25519::Public>("Charlie//stash"),
			get_account_id_from_seed::<sr25519::Public>("Dave//stash"),
			get_account_id_from_seed::<sr25519::Public>("Eve//stash"),
			get_account_id_from_seed::<sr25519::Public>("Ferdie//stash"),
		],
		true,
	))
	.build())
}

/// Configure initial storage state for FRAME modules.
fn testnet_genesis(
	initial_authorities: Vec<(AuraId, GrandpaId)>,
	shares: &[u8],
	root_key: AccountId,
	endowed_accounts: Vec<AccountId>,
	_enable_println: bool,
) -> serde_json::Value {
	serde_json::json!({
		"balances": {
			// Configure endowed accounts with initial balance of 1 << 60.
			"balances": endowed_accounts.iter().cloned().map(|k| (k, 1u64 << 60)).collect::<Vec<_>>(),
		},
		"aura": {
			"authorities": initial_authorities.iter().map(|x| (x.0.clone())).collect::<Vec<_>>(),
			"shares": shares.clone(),
		},
		"grandpa": {
			"authorities": initial_authorities.iter().map(|x| (x.1.clone(), 1)).collect::<Vec<_>>(),
		},
		"sudo": {
			// Assign network admin rights.
			"key": Some(root_key),
		},
		"etf": {
			"initialIbeParams": array_bytes::hex2bytes_unchecked(
				"a191b705ef18a6e4e5bd4cc56de0b8f94b1f3c908f3e3fcbd4d1dc12eb85059be7e7d801edc1856c8cfbe6d63a681c1f"),
			"initialIbePp": array_bytes::hex2bytes_unchecked(
				"93e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),
			"initialIbeCommitment": array_bytes::hex2bytes_unchecked(
				"b59c88bafc86ecc5043b1ab1e6d2ba81f29318a52a4bcd31f47248c88e27373f8be07894c8ba58353df8b3febf8e28011317199faae08cea851aa16ba00761a0960b97cb26ca9b36d46d26acace64214107f5eec7d91789eb77a0f130a40db49")
		},
	})
}
